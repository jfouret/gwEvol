
### DO NOT CHANGE
SHELL=bash
GITVERSION=$(shell git describe --tags | sed 's/^v//g')

progs = gwEvol-paml gwEvol-report gwEvol-results
bins=$(addprefix bin/,$(progs))

prog_install = gwEvol-paml gwEvol-report gwEvol-results
installs=$(addprefix ${BINPATH}/,$(prog_install))

### makefile core
all : $(bins)

$(bins) : bin 
	sed -e "s/SEDMATCHGITVERSION/${GITVERSION}/g" $(subst bin/,scripts/,$@) > $@
	chmod 755 $@

bin :
	mkdir bin
	chmod 755 bin

.PHONY : install
install : $(installs)

$(installs) : $(bins)
	ln -sf $(subst ${BINPATH}/, ${PWD}/bin/, $@) ${BINPATH}

.PHONY : uninstall
uninstall : 
	rm $(installs)

.PHONY : clean
clean :
	-rm -R bin
