
### DO NOT CHANGE
SHELL=bash
GITETE3=$(shell echo ${ETE3} | sed 's/\//\\\//g')
GITVERSION=$(shell git describe --tags | sed 's/^v//g')

progs = gwEvol-paml gwEvol-report allInOne.py gwEvol-results positiveSelectionTest.R geneGroupFilter.py checkAlign.py
bins=$(addprefix bin/,$(progs))

prog_install = gwEvol-paml gwEvol-report gwEvol-results
installs=$(addprefix ${INSTALLPATH}/,$(prog_install))

### makefile core
all : $(bins)

$(bins) : bin 
	sed -e "s/SEDMATCHGITVERSION/${GITVERSION}/g" $(subst bin/,scripts/,$@) | \
	sed -e "s/SEDMATCHETE3/${GITETE3}/g" > $@
	chmod 755 $@

bin :
	mkdir bin
	chmod 755 bin

.PHONY : install
install : $(installs)
$(installs) : $(bins)
	ln -sf $(subst ${INSTALLPATH}/, ${PWD}/bin/, $@) ${INSTALLPATH}

.PHONY : uninstall
uninstall : 
	rm $(installs)

.PHONY : clean
clean :
	-rm -R bin
